import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('üå± Starting database seed...');

  await prisma.product.deleteMany({});
  await prisma.category.deleteMany({});
  await prisma.shippingMethod.deleteMany({});
  await prisma.taxRate.deleteMany({});
  await prisma.coupon.deleteMany({});

  console.log('‚úÖ Cleared existing data');

  // ==================== CATEGORIES ====================
  console.log('üìÇ Creating categories...');

  const categories = await Promise.all([
    prisma.category.create({
      data: {
        name: '–ö—É—Ö–æ–Ω–Ω—ã–µ –Ω–æ–∂–∏',
        slug: 'kitchen-knives',
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—É—Ö–æ–Ω–Ω—ã–µ –Ω–æ–∂–∏ –¥–ª—è –¥–æ–º–∞ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤',
        image:
          'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=400',
        sortOrder: 1,
      },
    }),
    prisma.category.create({
      data: {
        name: '–û—Ö–æ—Ç–Ω–∏—á—å–∏ –Ω–æ–∂–∏',
        slug: 'hunting-knives',
        description: '–ù–∞–¥–µ–∂–Ω—ã–µ –Ω–æ–∂–∏ –¥–ª—è –æ—Ö–æ—Ç—ã –∏ —Ä—ã–±–∞–ª–∫–∏',
        image:
          'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=400',
        sortOrder: 2,
      },
    }),
    prisma.category.create({
      data: {
        name: '–°–∫–ª–∞–¥–Ω—ã–µ –Ω–æ–∂–∏',
        slug: 'folding-knives',
        description: '–ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å–∫–ª–∞–¥–Ω—ã–µ –Ω–æ–∂–∏ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è',
        image:
          'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=400',
        sortOrder: 3,
      },
    }),
    prisma.category.create({
      data: {
        name: '–¢–æ—á–∏–ª–∫–∏',
        slug: 'sharpeners',
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–æ—á–∏–ª–∫–∏ –¥–ª—è –Ω–æ–∂–µ–π',
        image:
          'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=400',
        sortOrder: 4,
      },
    }),
    prisma.category.create({
      data: {
        name: '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã',
        slug: 'accessories',
        description: '–ß–µ—Ö–ª—ã, –ø–æ–¥—Å—Ç–∞–≤–∫–∏ –∏ –¥—Ä—É–≥–∏–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è –Ω–æ–∂–µ–π',
        image:
          'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=400',
        sortOrder: 5,
      },
    }),
  ]);

  console.log(`‚úÖ Created ${categories.length} categories`);

  // ==================== PRODUCTS ====================
  console.log('üî™ Creating products...');

  const products = await Promise.all([
    // –ö—É—Ö–æ–Ω–Ω—ã–µ –Ω–æ–∂–∏
    prisma.product.create({
      data: {
        name: '–®–µ—Ñ-–Ω–æ–∂ Santoku 18—Å–º',
        slug: 'chef-knife-santoku-18cm',
        description:
          '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —à–µ—Ñ-–Ω–æ–∂ Santoku —Å –ª–µ–∑–≤–∏–µ–º 18—Å–º. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—Ä–µ–∑–∫–∏ –æ–≤–æ—â–µ–π, –º—è—Å–∞ –∏ —Ä—ã–±—ã.',
        shortDescription: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —à–µ—Ñ-–Ω–æ–∂ –¥–ª—è –∫—É—Ö–Ω–∏',
        sku: 'KNIFE-001',
        price: 4500.0,
        comparePrice: 5500.0,
        costPrice: 3000.0,
        weight: 250.0,
        brand: 'Zwilling',
        dimensions: '18x3x2',
        stockQuantity: 15,
        productType: 'knife',
        material: 'stainless_steel',
        handleType: 'fixed',
        bladeLength: 18.0,
        totalLength: 30.0,
        bladeHardness: 58,
        isFeatured: true,
        isNew: true,
        categoryId: categories[0].id,
        images: {
          create: [
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–®–µ—Ñ-–Ω–æ–∂ Santoku',
              isPrimary: true,
              sortOrder: 1,
            },
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–®–µ—Ñ-–Ω–æ–∂ Santoku - –≤–∏–¥ —Å–±–æ–∫—É',
              isPrimary: false,
              sortOrder: 2,
            },
          ],
        },
      },
    }),
    prisma.product.create({
      data: {
        name: '–ù–æ–∂ –¥–ª—è —Ö–ª–µ–±–∞ 20—Å–º',
        slug: 'bread-knife-20cm',
        description:
          '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–∂ –¥–ª—è —Ö–ª–µ–±–∞ —Å –∑—É–±—á–∞—Ç—ã–º –ª–µ–∑–≤–∏–µ–º. –õ–µ–≥–∫–æ —Ä–µ–∂–µ—Ç —Å–≤–µ–∂–∏–π –∏ —á–µ—Ä—Å—Ç–≤—ã–π —Ö–ª–µ–±.',
        shortDescription: '–ù–æ–∂ –¥–ª—è —Ö–ª–µ–±–∞ —Å –∑—É–±—á–∞—Ç—ã–º –ª–µ–∑–≤–∏–µ–º',
        sku: 'KNIFE-002',
        price: 3200.0,
        comparePrice: 3800.0,
        brand: 'W√ºsthof',
        costPrice: 2200.0,
        weight: 180.0,
        dimensions: '20x2.5x1.5',
        stockQuantity: 12,
        productType: 'knife',
        material: 'stainless_steel',
        handleType: 'fixed',
        bladeLength: 20.0,
        totalLength: 32.0,
        bladeHardness: 56,
        categoryId: categories[0].id,
        images: {
          create: [
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–ù–æ–∂ –¥–ª—è —Ö–ª–µ–±–∞',
              isPrimary: true,
              sortOrder: 1,
            },
          ],
        },
      },
    }),
    // –û—Ö–æ—Ç–Ω–∏—á—å–∏ –Ω–æ–∂–∏
    prisma.product.create({
      data: {
        name: '–û—Ö–æ—Ç–Ω–∏—á–∏–π –Ω–æ–∂ Bowie',
        slug: 'hunting-knife-bowie',
        description:
          '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –æ—Ö–æ—Ç–Ω–∏—á–∏–π –Ω–æ–∂ Bowie —Å –ø—Ä–æ—á–Ω—ã–º –ª–µ–∑–≤–∏–µ–º. –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –æ—Ö–æ—Ç—ã –∏ –∫–µ–º–ø–∏–Ω–≥–∞.',
        shortDescription: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –æ—Ö–æ—Ç–Ω–∏—á–∏–π –Ω–æ–∂',
        sku: 'KNIFE-003',
        price: 8500.0,
        comparePrice: 9500.0,
        costPrice: 6000.0,
        weight: 350.0,
        brand: 'Buck Knives',
        dimensions: '25x4x3',
        stockQuantity: 8,
        productType: 'knife',
        material: 'carbon_steel',
        handleType: 'fixed',
        bladeLength: 15.0,
        totalLength: 25.0,
        bladeHardness: 60,
        isFeatured: true,
        categoryId: categories[1].id,
        images: {
          create: [
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–û—Ö–æ—Ç–Ω–∏—á–∏–π –Ω–æ–∂ Bowie',
              isPrimary: true,
              sortOrder: 1,
            },
          ],
        },
      },
    }),
    // –°–∫–ª–∞–¥–Ω—ã–µ –Ω–æ–∂–∏
    prisma.product.create({
      data: {
        name: '–°–∫–ª–∞–¥–Ω–æ–π –Ω–æ–∂ EDC',
        slug: 'folding-knife-edc',
        description:
          '–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–∫–ª–∞–¥–Ω–æ–π –Ω–æ–∂ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –Ω–æ—à–µ–Ω–∏—è. –ù–∞–¥–µ–∂–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.',
        shortDescription: '–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–∫–ª–∞–¥–Ω–æ–π –Ω–æ–∂',
        sku: 'KNIFE-004',
        price: 2800.0,
        comparePrice: 3200.0,
        costPrice: 1900.0,
        weight: 120.0,
        brand: 'Spyderco',
        dimensions: '8x2x1',
        stockQuantity: 25,
        productType: 'knife',
        material: 'stainless_steel',
        handleType: 'folding',
        bladeLength: 8.0,
        totalLength: 18.0,
        bladeHardness: 58,
        isNew: true,
        categoryId: categories[2].id,
        images: {
          create: [
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–°–∫–ª–∞–¥–Ω–æ–π –Ω–æ–∂ EDC',
              isPrimary: true,
              sortOrder: 1,
            },
          ],
        },
      },
    }),
    // –¢–æ—á–∏–ª–∫–∏
    prisma.product.create({
      data: {
        name: '–¢–æ—á–∏–ª–∫–∞ –¥–ª—è –Ω–æ–∂–µ–π 3-—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è',
        slug: 'knife-sharpener-3-stage',
        description:
          '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç–æ—á–∏–ª–∫–∞ —Å —Ç—Ä–µ–º—è –∞–±—Ä–∞–∑–∏–≤–Ω—ã–º–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–π –∑–∞—Ç–æ—á–∫–∏.',
        shortDescription: '3-—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Ç–æ—á–∏–ª–∫–∞ –¥–ª—è –Ω–æ–∂–µ–π',
        sku: 'SHARP-001',
        price: 1500.0,
        comparePrice: 1800.0,
        costPrice: 1000.0,
        weight: 500.0,
        dimensions: '25x8x3',
        stockQuantity: 20,
        brand: 'Condor Tool & Knife',
        productType: 'sharpener',
        categoryId: categories[3].id,
        images: {
          create: [
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–¢–æ—á–∏–ª–∫–∞ –¥–ª—è –Ω–æ–∂–µ–π',
              isPrimary: true,
              sortOrder: 1,
            },
          ],
        },
      },
    }),
    // –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã
    prisma.product.create({
      data: {
        name: '–ö–æ–∂–∞–Ω—ã–π —á–µ—Ö–æ–ª –¥–ª—è –Ω–æ–∂–∞',
        slug: 'leather-knife-sheath',
        description:
          '–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–∂–∞–Ω—ã–π —á–µ—Ö–æ–ª –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–Ω–æ—Å–∫–∏ –Ω–æ–∂–µ–π.',
        shortDescription: '–ö–æ–∂–∞–Ω—ã–π —á–µ—Ö–æ–ª –¥–ª—è –Ω–æ–∂–∞',
        sku: 'ACC-001',
        price: 800.0,
        comparePrice: 950.0,
        costPrice: 500.0,
        weight: 150.0,
        dimensions: '20x8x2',
        stockQuantity: 30,
        productType: 'sheath',
        material: 'leather',
        categoryId: categories[4].id,
        images: {
          create: [
            {
              url: 'https://images.unsplash.com/photo-1588668214407-6ea9a6d8c272?w=600',
              alt: '–ö–æ–∂–∞–Ω—ã–π —á–µ—Ö–æ–ª',
              isPrimary: true,
              sortOrder: 1,
            },
          ],
        },
      },
    }),
  ]);

  console.log(`‚úÖ Created ${products.length} products`);

  // ==================== SHIPPING METHODS ====================
  console.log('üöö Creating shipping methods...');

  const shippingMethods = await Promise.all([
    prisma.shippingMethod.create({
      data: {
        name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞',
        description: '–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä–æ–º 2-3 –¥–Ω—è',
        price: 300.0,
        estimatedDays: '2-3 –¥–Ω—è',
        sortOrder: 1,
      },
    }),
    prisma.shippingMethod.create({
      data: {
        name: '–≠–∫—Å–ø—Ä–µ—Å—Å –¥–æ—Å—Ç–∞–≤–∫–∞',
        description: '–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä–æ–º –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è',
        price: 800.0,
        estimatedDays: '1 –¥–µ–Ω—å',
        sortOrder: 2,
      },
    }),
    prisma.shippingMethod.create({
      data: {
        name: '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞',
        description: '–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5000‚ÇΩ',
        price: 0.0,
        freeShippingThreshold: 5000.0,
        estimatedDays: '3-5 –¥–Ω–µ–π',
        sortOrder: 3,
      },
    }),
  ]);

  console.log(`‚úÖ Created ${shippingMethods.length} shipping methods`);

  // ==================== TAX RATES ====================
  console.log('üí∞ Creating tax rates...');

  const taxRates = await Promise.all([
    prisma.taxRate.create({
      data: {
        name: '–ù–î–° 20%',
        rate: 0.2,
        country: 'RU',
        isActive: true,
      },
    }),
  ]);

  console.log(`‚úÖ Created ${taxRates.length} tax rates`);

  // ==================== COUPONS ====================
  console.log('üé´ Creating coupons...');

  const coupons = await Promise.all([
    prisma.coupon.create({
      data: {
        code: 'WELCOME10',
        name: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞',
        description: '–°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑',
        discountType: 'percentage',
        discountValue: 10.0,
        minimumAmount: 1000.0,
        usageLimit: 100,
        startsAt: new Date(),
        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 –¥–Ω–µ–π
      },
    }),
    prisma.coupon.create({
      data: {
        code: 'SHARP50',
        name: '–°–∫–∏–¥–∫–∞ –Ω–∞ —Ç–æ—á–∏–ª–∫–∏',
        description: '–°–∫–∏–¥–∫–∞ 50‚ÇΩ –Ω–∞ –≤—Å–µ —Ç–æ—á–∏–ª–∫–∏',
        discountType: 'fixed_amount',
        discountValue: 50.0,
        minimumAmount: 500.0,
        usageLimit: 50,
        startsAt: new Date(),
        expiresAt: new Date(Date.now() + 60 * 24 * 60 * 60 * 1000), // 60 –¥–Ω–µ–π
      },
    }),
  ]);

  console.log(`‚úÖ Created ${coupons.length} coupons`);

  console.log('üéâ Database seeding completed successfully!');
}

main()
  .catch((e) => {
    console.error('‚ùå Error during seeding:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
